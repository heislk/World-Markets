{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Hkeep/Desktop/World%20Markets/app/api/market-data/route.js"],"sourcesContent":["import yahooFinance from 'yahoo-finance2';\r\nimport { NextResponse } from 'next/server';\r\n\r\nconst INDICES = [\r\n    { symbol: '^GSPC', name: 'S&P 500', region: 'North America', lat: 38, long: -97 },\r\n    { symbol: '^DJI', name: 'Dow Jones', region: 'North America', lat: 43, long: -75 },\r\n    { symbol: '^IXIC', name: 'Nasdaq', region: 'North America', lat: 40, long: -85 },\r\n    { symbol: '^GSPTSE', name: 'S&P/TSX', region: 'North America', lat: 56, long: -106 },\r\n    { symbol: '^MXX', name: 'IPC Mexico', region: 'North America', lat: 23, long: -102 },\r\n\r\n    { symbol: '^BVSP', name: 'Bovespa', region: 'South America', lat: -14, long: -51 },\r\n    { symbol: '^MERV', name: 'Merval', region: 'South America', lat: -34, long: -64 },\r\n    { symbol: '^IPSA', name: 'IPSA', region: 'South America', lat: -33, long: -70 },\r\n\r\n    { symbol: '^FTSE', name: 'FTSE 100', region: 'Europe', lat: 53, long: -2 },\r\n    { symbol: '^GDAXI', name: 'DAX', region: 'Europe', lat: 51, long: 10 },\r\n    { symbol: '^FCHI', name: 'CAC 40', region: 'Europe', lat: 46, long: 2 },\r\n    { symbol: '^STOXX50E', name: 'Euro Stoxx 50', region: 'Europe', lat: 48, long: 13 },\r\n    { symbol: '^IBEX', name: 'IBEX 35', region: 'Europe', lat: 40, long: -3 },\r\n    { symbol: '^SSMI', name: 'SMI', region: 'Europe', lat: 46, long: 8 },\r\n\r\n    { symbol: '^N225', name: 'Nikkei 225', region: 'Asia', lat: 36, long: 138 },\r\n    { symbol: '^HSI', name: 'Hang Seng', region: 'Asia', lat: 23, long: 114 },\r\n    { symbol: '^STI', name: 'Straits Times', region: 'Asia', lat: 1.3, long: 103.8 },\r\n    { symbol: '^BSESN', name: 'Sensex', region: 'Asia', lat: 20, long: 78 },\r\n    { symbol: '^KS11', name: 'KOSPI', region: 'Asia', lat: 37, long: 127 },\r\n    { symbol: '000001.SS', name: 'Shanghai Comp', region: 'Asia', lat: 31, long: 121 },\r\n\r\n    { symbol: '^AXJO', name: 'ASX 200', region: 'Oceania', lat: -25, long: 133 },\r\n    { symbol: '^NZ50', name: 'NZX 50', region: 'Oceania', lat: -40, long: 174 },\r\n\r\n    { symbol: '^TA125.TA', name: 'TA-125', region: 'Middle East', lat: 31, long: 34 },\r\n];\r\n\r\nconst FALLBACK_DATA = {\r\n    '^GSPC': { price: 4783.45, changePercent: 0.15, changeAmount: 7.2, marketState: 'REGULAR' },\r\n    '^DJI': { price: 37689.54, changePercent: -0.05, changeAmount: -18.5, marketState: 'REGULAR' },\r\n    '^IXIC': { price: 15011.35, changePercent: 0.45, changeAmount: 67.4, marketState: 'REGULAR' },\r\n    '^GSPTSE': { price: 20958.44, changePercent: -0.12, changeAmount: -25.6, marketState: 'CLOSED' },\r\n    '^MXX': { price: 57324.11, changePercent: 0.88, changeAmount: 504.2, marketState: 'CLOSED' },\r\n    '^BVSP': { price: 132456.20, changePercent: -0.50, changeAmount: -665.4, marketState: 'REGULAR' },\r\n    '^MERV': { price: 980123.00, changePercent: 1.20, changeAmount: 12000, marketState: 'REGULAR' },\r\n    '^IPSA': { price: 6100.50, changePercent: -0.30, changeAmount: -18.2, marketState: 'REGULAR' },\r\n    '^FTSE': { price: 7689.45, changePercent: 0.22, changeAmount: 16.8, marketState: 'CLOSED' },\r\n    '^GDAXI': { price: 16752.33, changePercent: -0.35, changeAmount: -58.4, marketState: 'CLOSED' },\r\n    '^FCHI': { price: 7450.22, changePercent: -0.15, changeAmount: -11.1, marketState: 'CLOSED' },\r\n    '^STOXX50E': { price: 4480.55, changePercent: -0.20, changeAmount: -9.0, marketState: 'CLOSED' },\r\n    '^IBEX': { price: 10111.40, changePercent: 0.40, changeAmount: 40.5, marketState: 'CLOSED' },\r\n    '^SSMI': { price: 11120.30, changePercent: 0.10, changeAmount: 11.2, marketState: 'CLOSED' },\r\n    '^N225': { price: 33450.10, changePercent: -0.80, changeAmount: -260.5, marketState: 'CLOSED' },\r\n    '^HSI': { price: 16500.22, changePercent: -1.50, changeAmount: -250.0, marketState: 'CLOSED' },\r\n    '^STI': { price: 3180.44, changePercent: 0.10, changeAmount: 3.2, marketState: 'CLOSED' },\r\n    '^BSESN': { price: 71500.33, changePercent: 0.60, changeAmount: 430.2, marketState: 'CLOSED' },\r\n    '^KS11': { price: 2580.44, changePercent: -0.25, changeAmount: -6.4, marketState: 'CLOSED' },\r\n    '000001.SS': { price: 2950.22, changePercent: 0.20, changeAmount: 5.8, marketState: 'CLOSED' },\r\n    '^AXJO': { price: 7490.55, changePercent: -0.10, changeAmount: -7.5, marketState: 'CLOSED' },\r\n    '^NZ50': { price: 11650.33, changePercent: 0.05, changeAmount: 5.5, marketState: 'CLOSED' },\r\n    '^TA125.TA': { price: 1980.45, changePercent: 1.10, changeAmount: 21.5, marketState: 'REGULAR' }\r\n};\r\n\r\nexport async function GET() {\r\n    try {\r\n        const results = await Promise.all(\r\n            INDICES.map(async (index) => {\r\n                try {\r\n                    const quote = await yahooFinance.quote(index.symbol);\r\n\r\n                    return {\r\n                        ...index,\r\n                        price: quote.regularMarketPrice,\r\n                        changePercent: quote.regularMarketChangePercent,\r\n                        changeAmount: quote.regularMarketChange,\r\n                        marketState: quote.marketState,\r\n                    };\r\n                } catch (err) {\r\n                    const fallback = FALLBACK_DATA[index.symbol] || {};\r\n                    return { ...index, ...fallback, fromFallback: true };\r\n                }\r\n            })\r\n        );\r\n\r\n        return NextResponse.json({ indices: results });\r\n    } catch (error) {\r\n        return NextResponse.json({ error: 'Failed to fetch market data' }, { status: 500 });\r\n    }\r\n}\r\n"],"names":[],"mappings":"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"}}]
}